<z-title title="门店店铺出单信息" button="{{true}}" switch="{{switch}}" bind:switch="onSwitch" />
<wxs module="handle">
  var handleData = function(val) {
    return val ? val : ''
  }
  module.exports = {
    handleData:handleData
  }
</wxs>
<view class="info bg-white df text-center">
  <view wx:if="{{switch}}" class="info-list-box box1 df-auto">
    <view class="list-title">美团</view>
    <scroll-view class="info-list text-left" scroll-y>
      <view wx:for="{{ lists }}" wx:key="order_num" class="list">
        <!-- <text>{{index + 1}}、-{{ item.order_num }}号单-{{item.is_meal == '1' ? '出餐成功' : '已接单'}}</text> -->
        <view class="df jc-between ai-center status">
          <text>#{{item.order_num}}{{handle.handleData(item.order_type)}}</text>
          <text>{{handle.handleData(item.meal_msg)}}</text>
        </view>
        <view class="time">接单时间: {{handle.handleData(item.order_time)}}</view>
        <view class="time">出餐时间: {{handle.handleData(item.meal_time)}}</view>
      </view>
    </scroll-view>
  </view>
  <view wx:if="{{switch}}" class="info-list-box box2 df-auto">
    <view class="list-title">饿了么</view>
    <scroll-view class="info-list text-left" scroll-y>
      <view wx:for="{{ lists2 }}" wx:key="order_num" class="list">
        <!-- <text>{{index + 1}}、-{{ item.order_num }}号单-{{item.is_meal == '1' ? '出餐成功' : '已接单'}}</text> -->
        <view class="df jc-between ai-center status">
          <text>#{{item.order_num}}{{handle.handleData(item.order_type)}}</text>
          <text>{{handle.handleData(item.meal_msg)}}</text>
        </view>
        <view class="time">接单时间: {{handle.handleData(item.order_time)}}</view>
        <view class="time">出餐时间: {{handle.handleData(item.meal_time)}}</view>
      </view>
    </scroll-view>
  </view>
  <view wx:else class="df-auto close-tip">自动出单已关闭</view>
</view>
<button class="btn" hover-class="button-hover" bind:tap="openTime">设置出单时间</button>
<!-- 弹出框 -->
<mp-dialog ext-class="dialog" show="{{dialogShow}}">
  <image class="dialog-bg" src="/images/dialog_bg2.png" mode="aspectFill"/>
  <view class="dialog-container">
    <view class="dialog-header text-left">
      <text class="dialog-title">时间设置</text>
      <mp-icon class="icon-close" icon="close" color="white" size="{{24}}" bind:tap="onClose"></mp-icon>
    </view>
    <view class="dialog-content ovh">
      <mp-form id="form" class="dialog-form" rules="{{rules}}" models="{{formData}}">
        <view class="form-label text-left">即时订单时间</view>
        <input type="number" bindinput="formInputChange" data-field="time" class="dialog-input" placeholder="1-20分钟" value="{{formData.time}}" />
        <view class="form-label text-left">预订单时间</view>
        <input type="number" bindinput="formInputChange" data-field="mealTime" class="dialog-input" placeholder="40-60分钟" value="{{formData.mealTime}}" />
      </mp-form>
      <button class="dialog-submit" bindtap="formSubmit">确定</button>
    </view>
  </view>
</mp-dialog>